<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="images/icon.ico" type="image/x-icon">
    <title>Character Creator | HELLDIVERS: Mess Hall</title>
</head>
<body>
    <div class="header"><a href="index.html"><img src="images/title_yellow.png", style="object-fit:contain"></a></div>
    <div class="content">
        <div class="contentcontainer" id="charcreator">
            <input type="text" id="name" placeholder="Name" maxlength="32" oninput="this.value = this.value.replace(/[^a-zA-Z0-9'_-.,()]$/g, '')">
            <input type="text" id="rank" placeholder="Rank" maxlength="32" oninput="this.value = this.value.replace(/[^a-zA-Z0-9'_-.,()]$/g, '')">
            <input type="text" id="faction" placeholder="Faction" maxlength="32" oninput="this.value = this.value.replace(/[^a-zA-Z0-9'_-.,()]$/g, '')">
        </div>
        <div class="contentcontainer" id="loadoutcreator">
            <div class="dropdown_custom" id="armor" style="overflow: hidden; z-index: 0;">
                <div class="dropdown_custom_head">
                    <h3><u>Armor</u></h3>
                </div>
                <div class="dropdown_custom_select">
                    <button class="dropdown_custom_item" onclick="toggleDisplay('armor')">
                        <h4>None</h4>
                        <img src="images/None.webp">
                    </button>
                </div>
                <div class="dropdown_custom_list">
                </div>
            </div>
            <div class="dropdown_custom" id="weaponsPrimary" style="overflow: hidden; z-index: 0;">
                <div class="dropdown_custom_head">
                    <h3><u>Primary Weapon</u></h3>
                </div>
                <div class="dropdown_custom_select">
                    <button class="dropdown_custom_item" onclick="toggleDisplay('weaponsPrimary')">
                        <h4>None</h4>
                        <img src="images/None.webp">
                    </button>
                </div>
                <div class="dropdown_custom_list">
                </div>
            </div>
            <div class="dropdown_custom" id="weaponsSecondary" style="overflow: hidden; z-index: 0;">
                <div class="dropdown_custom_head">
                    <h3><u>Secondary Weapon</u></h3>
                </div><div class="dropdown_custom_select">
                    <button class="dropdown_custom_item" onclick="toggleDisplay('weaponsSecondary')">
                        <h4>None</h4>
                        <img src="images/None.webp">
                    </button>
                </div>
                <div class="dropdown_custom_list">
                </div>
            </div>
            <div class="dropdown_custom" id="weaponsThrowable" style="overflow: hidden; z-index: 0;">
                <div class="dropdown_custom_head">
                    <h3><u>Throwable</u></h3>
                </div><div class="dropdown_custom_select">
                    <button class="dropdown_custom_item" onclick="toggleDisplay('weaponsThrowable')">
                        <h4>None</h4>
                        <img src="images/None.webp">
                    </button>
                </div>
                <div class="dropdown_custom_list">
                </div>
            </div>
            <div class="dropdown_custom" id="weaponsSupport" style="overflow: hidden; z-index: 0;">
                <div class="dropdown_custom_head">
                    <h3><u>Support Weapon</u></h3>
                </div><div class="dropdown_custom_select">
                    <button class="dropdown_custom_item" onclick="toggleDisplay('weaponsSupport')">
                        <h4>None</h4>
                        <img src="images/None.webp">
                    </button>
                </div>
                <div class="dropdown_custom_list">
                </div>
            </div>
            <div class="dropdown_custom" id="tacpack" style="overflow: hidden; z-index: 0;">
                <div class="dropdown_custom_head">
                    <h3><u>Tac-Pack</u></h3>
                </div><div class="dropdown_custom_select">
                    <button class="dropdown_custom_item" onclick="toggleDisplay('tacpack')">
                        <h4>None</h4>
                        <img src="images/None.webp">
                    </button>
                </div>
                <div class="dropdown_custom_list">
                </div>
            </div>
            <div class="dropdown_custom" id="stratagem1" style="overflow: hidden; z-index: 0;">
                <div class="dropdown_custom_head">
                    <h3><u>Stratagem #1</u></h3>
                </div>
                <div class="dropdown_custom_select">
                    <button class="dropdown_custom_item" onclick="toggleDisplay('stratagem1')">
                        <h4>None</h4>
                        <img src="images/None.webp">
                    </button>
                </div>
                <div class="dropdown_custom_list">
                </div>
            </div>
            <div class="dropdown_custom" id="stratagem2" style="overflow: hidden; z-index: 0;">
                <div class="dropdown_custom_head">
                    <h3><u>Stratagem #2</u></h3>
                </div>
                <div class="dropdown_custom_select">
                    <button class="dropdown_custom_item" onclick="toggleDisplay('stratagem2')">
                        <h4>None</h4>
                        <img src="images/None.webp">
                    </button>
                </div>
                <div class="dropdown_custom_list">
                </div>
            </div>
            <div class="dropdown_custom" id="stratagem3" style="overflow: hidden; z-index: 0;">
                <div class="dropdown_custom_head">
                    <h3><u>Stratagem #3</u></h3>
                </div>
                <div class="dropdown_custom_select">
                    <button class="dropdown_custom_item" onclick="toggleDisplay('stratagem3')">
                        <h4>None</h4>
                        <img src="images/None.webp">
                    </button>
                </div>
                <div class="dropdown_custom_list">
                </div>
            </div>
            <div class="dropdown_custom" id="stratagem4" style="overflow: hidden; z-index: 0;">
                <div class="dropdown_custom_head">
                    <h3><u>Stratagem #4</u></h3>
                </div>
                <div class="dropdown_custom_select">
                    <button class="dropdown_custom_item" onclick="toggleDisplay('stratagem4')">
                        <h4>None</h4>
                        <img src="images/None.webp">
                    </button>
                </div>
                <div class="dropdown_custom_list">
                </div>
            </div>
            <div class="dropdown_custom" id="booster" style="overflow: hidden; z-index: 0;">
                <div class="dropdown_custom_head">
                    <h3><u>Booster</u></h3>
                </div>
                <div class="dropdown_custom_select">
                    <button class="dropdown_custom_item" onclick="toggleDisplay('booster')">
                        <h4>None</h4>
                        <img src="images/None.webp">
                    </button>
                </div>
                <div class="dropdown_custom_list">
                </div>
            </div>
            <button class="confirm" onclick="confirm()">Confirm Loadout</button>
        </div>
    </div>
</body>
</html>
<style>
    .contentcontainer#charcreator {
        box-sizing: border-box;
        align-items: center;
        padding: 20px;
        width: 45%;
        height: 100%;
        background-color: #0c0c0ce0;
    }
    .contentcontainer#loadoutcreator {
        box-sizing: border-box;
        align-items: center;
        padding: 20px;
        width: 45%;
        background-color: #0c0c0ce0;
    }

    input {
        background-color: #1a1a1a;
        color: #ffffff;
        border: 1px solid #333333;
        padding: 5px;
        border-radius: 8px;
        height: 30px;
        font-size: 20px;
        width: 90%;
    }
    input::placeholder {
        color: #aaa;
    }
</style>
<script src="commons.js"></script>
<script src="sheet creator.js"></script>
<script>
    createCC();
    var active = null;

    function toggleDisplay(id) {
        const element = document.getElementById(id);

        if (active != null && active != id) {
            const activeElement = document.getElementById(active);
            activeElement.style.overflow = "hidden";
            activeElement.style.zIndex = 0;
            active = null;
        }

        if (element.style.overflow == "hidden") {
            element.style.overflow = "visible";
            element.style.zIndex = 5;
            active = id;
        } else if (element.style.overflow == "visible") {
            element.style.overflow = "hidden";
            element.style.zIndex = 0;
            active = null;
        }
        
        if (id == 'weaponsSupport') {
        }
    }

    function select(id, name) {
        toggleDisplay(id);
        item = document.getElementById(id).children[1].children[0];
        item.children[0].innerText = name;
        item.children[1].setAttribute('src', webp(name));

        if (id == "weaponsSupport") autoStrat(name.split(" (")[0]);
        if (id == "tacpack") autoStrat(name.replace(" Loadpack", ""));

        if (id.includes("stratagem")) singleStrat(id, name);
    }

    function autoStrat(name) {
        console.log(name);
        var yipe = null;
        for (var id of ["stratagem1", "stratagem2", "stratagem3", "stratagem4"]) {
            item = document.getElementById(id).children[1].children[0];
            if (item.children[0].innerText == "None" && stratagems.some(stratagem => stratagem.name === name)) {
                item.children[0].innerText = name;
                item.children[1].setAttribute('src', webp(name));
                yipe = id;
                break;
            }
        }
        if (!yipe) {
            yipe = "stratagem1";
            item = document.getElementById(yipe).children[1].children[0];
            if (item.children[0].innerText == "None" && stratagems.some(stratagem => stratagem.name === name)) {
                item.children[0].innerText = name;
                item.children[1].setAttribute('src', webp(name));
            }
        }
        singleStrat(yipe, name);
    }
    
    function singleStrat(id, name) {
        for (var id1 of ["stratagem1", "stratagem2", "stratagem3", "stratagem4"]) {
            if (id1 == id) continue;
            item = document.getElementById(id1).children[1].children[0];
            bling = item.children[0].innerText;
            if (bling == name && bling != "None") { 
                item.children[0].innerText = "None";
                item.children[1].setAttribute('src', webp("None"));
                break;
            }
        }
    }
</script>